<!DOCTYPE html>
<html>
	<head>
		%include head.tmpl
	</head>
	<body>
	    <script>
		    // Identifies the function that refreshes mote state on an interval.
		    var timeoutId;
		    var moteid;

		    $(function() {


		        // Set selected mote if so specified in request. Must do this after
		        // grid variables have been defined so mote selection works.
		        % if requested_mote:
		            var selMote = '{{requested_mote}}';
		        % else:
		            var selMote = 'none';
		        % end
		        console.log('Display requested mote selection: ' + selMote);
		        $("#mote_select").val(selMote).change();
		    });
		</script>

		<div id="wrapper">
			%include navbar.tmpl ovVersion=ovVersion, roverMode=roverMode, ctrlMode=ctrlMode

			<div id="page-wrapper">
	            <div class="row">
	                <div class="col-lg-12">
	                    <h1 class="page-header">Controller</h1>
	                </div>
	            </div>


	            <div class="row">
                	<div class="col-lg-12">
		                <select class="rel_value_fld" id="mote_select" size="1">
		                    <option value="none">Select mote...</option>
		                    % for mote in motelist:
		                       <option>{{mote}}</option>
		                    % end
		                </select>
		            </div>

		            <script>
		                $( "#myip_select" ).change(function(){
		                    myip =  $(this).val();

		                    console.log('Update for myip selection: ' + myip);
		                    // Store to allow automatically selecting this rover.
		                    setCookie("selected_myip", myip);

		                    // Don't allow to reselect null option.
		                    //$("#myip_select option[value='none']").remove();
		                });
		            </script>

		        </div>

                <br>

	            <div class="row">
                	<div class="col-lg-12">
                        <button id="inischedule_btn" type="button" class="btn btn-default btn-xs">Install Schedule</button>
                        <button id="owrtschedule_btn" type="button" class="btn btn-default btn-xs">Overwrite Slot</button>
                        <button id="delschedule_btn" type="button" class="btn btn-default btn-xs">Delete Slot</button>
                        <button id="remapschedule_btn" type="button" class="btn btn-default btn-xs">Remap Slot</button>
                        <button id="clearschedule_btn" type="button" class="btn btn-default btn-xs">Clear BIER Schedule</button>

                        <script>
		                    $( "#inischedule_btn" )
		                        .button()
			                    .click(function( event ) {
                                    $.ajax({
                                        dataType: "json",
                                        url: "/schedule/"+"inischedule",
                                        success: schedule,
                                        error: errorOnAjax
                                    });
                                    console.log('Installed new schedule');
		                    });
		                </script>

		                <script>
		                    $( "#owrtschedule_btn" )
		                        .button()
			                    .click(function( event ) {
                                    $.ajax({
                                        dataType: "json",
                                        url: "/schedule/"+"owrtschedule",
                                        success: schedule,
                                        error: errorOnAjax
                                    });
                                    console.log('Overwritten schedule');
		                    });
		                </script>

		                <script>
		                    $( "#delschedule_btn" )
		                        .button()
			                    .click(function( event ) {
                                    $.ajax({
                                        dataType: "json",
                                        url: "/schedule/"+"delschedule",
                                        success: schedule,
                                        error: errorOnAjax
                                    });
                                    console.log('Overwritten schedule');
		                    });
		                </script>

		                <script>
		                    $( "#remapschedule_btn" )
		                        .button()
			                    .click(function( event ) {
                                    $.ajax({
                                        dataType: "json",
                                        url: "/schedule/"+"remapschedule",
                                        success: schedule,
                                        error: errorOnAjax
                                    });
                                    console.log('Overwritten schedule');
		                    });
		                </script>

		                <script>
		                    $( "#clearschedule_btn" )
		                        .button()
			                    .click(function( event ) {
                                    $.ajax({
                                        dataType: "json",
                                        url: "/schedule/"+"clearschedule",
                                        success: schedule,
                                        error: errorOnAjax
                                    });
                                    console.log('Overwritten schedule');
		                    });
		                </script>

		                <script>
						    function schedule(json) {

						        console.log('success');
						    }

						    function errorOnAjax(jqxhr, status, errorstr) {
						        var errText = (errorstr == null)
						                ? '' : ', error: ' + errorstr;
						        console.log('Ajax error: ' + status + errText);
						    }
						</script>

                	</div>
                </div>

                <br>


	        </div>
	    </div>
	</body>
</html>